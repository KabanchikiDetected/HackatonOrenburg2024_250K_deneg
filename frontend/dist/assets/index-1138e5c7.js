import{j as e,r as c}from"./index-9b232465.js";import{M as h}from"./index-8f65f0b7.js";import{c as _}from"./index-7b0fb978.js";const x="_wrapper_e5yck_1",j="_row_e5yck_10",y="_top_e5yck_18",v="_title_e5yck_24",f="_close_e5yck_27",g="_bottom_e5yck_40",b="_buttons_e5yck_61",w="_red_e5yck_67",k="_faculty_e5yck_70",N="_faculty_wrapper_e5yck_74",C="_department_wrapper_e5yck_81",S="_department_e5yck_81",a={wrapper:x,row:j,top:y,title:v,close:f,bottom:g,buttons:b,red:w,faculty:k,faculty_wrapper:N,department_wrapper:C,department:S},F=({setIsOpen:s,faculties:n,setFaculties:l})=>{function o(){n.push({faculty:"Факультет",id:1,departments:[{name:"Кафедра",id:1}]})}return e.jsxs("div",{className:a.wrapper,children:[e.jsxs("div",{className:a.row+" "+a.top,children:[e.jsx("h2",{className:a.title,children:"Структура ОГУ"}),e.jsx("button",{className:a.close,onClick:()=>s(!1),children:e.jsx("img",{src:"/images/close.svg",alt:""})})]}),e.jsxs("div",{className:a.row+" "+a.bottom,children:[n.map((r,u)=>e.jsxs("div",{className:a.faculty,children:[e.jsxs("div",{className:a.faculty_wrapper,children:[e.jsx("input",{className:a.faculty}),e.jsx("img",{src:"/images/close.svg",alt:""})]}),r.departments.map((i,p)=>e.jsx("div",{className:a.department_wrapper,children:e.jsx("input",{value:i})})),e.jsx("button",{children:"Добавить кафедру"})]})),e.jsx("button",{onClick:o,children:"Добавить факультет"})]})]})},P=()=>{const[s,n]=c.useState({photoPreview:"",name:"",university:"",faculty:"",department:"",about:"",city:"",short_name:"",long_name:""}),l=c.useRef(null),[o,r]=c.useState(!1),[u,i]=c.useState([{faculty:"",id:1,departments:[{name:"",id:1}]}]);function p(t){n({...s,photoPreview:URL.createObjectURL(t.target.files[0])})}async function d(){let t=await fetch("/api/universities/university/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(s)});t.ok||(t=await t.json()),console.log(t)}return e.jsxs("main",{className:"student-reg reg",children:[e.jsx(h,{isOpen:o,setIsOpen:r,children:e.jsx(F,{setFaculties:i,faculties:u,setIsOpen:r})}),e.jsxs("div",{className:"reg__row",children:[e.jsxs("div",{className:"avatar",children:[e.jsx("img",{src:s.photoPreview,alt:""}),e.jsx("input",{value:"",onChange:t=>p(t),style:{display:"none"},ref:l,type:"file"}),e.jsx("button",{className:"add-photo",onClick:()=>l.current.click(),children:"Добавить фото"})]}),e.jsxs("div",{className:"info",children:[e.jsx("label",{htmlFor:"short-name",children:e.jsx("p",{children:"Короткое название ВУЗа"})}),e.jsx("input",{id:"short-name",value:s.short_name,onChange:t=>n({...s,short_name:t.target.value}),type:"text"}),e.jsx("label",{htmlFor:"university",children:e.jsx("p",{children:"Полное название ВУЗа"})}),e.jsx("input",{id:"university",value:s.long_name,onChange:t=>n({...s,long_name:t.target.value}),type:"text"}),e.jsx("label",{htmlFor:"faculty",children:e.jsx("p",{children:"Город"})}),e.jsx("select",{value:s.city,onChange:t=>{n({...s,city:t.target.value})},children:_.map((t,m)=>e.jsx("option",{value:t,children:t},t+m))}),e.jsx("button",{className:"add-struct",onClick:()=>r(!0),children:e.jsx("p",{children:"Добавить структуру"})})]})]}),e.jsx("label",{htmlFor:"about",children:"О ВУЗе"}),e.jsx("textarea",{value:s.about,onChange:t=>n({...s,about:t.target.value}),id:"about"}),e.jsx("br",{}),e.jsx("button",{onClick:d,className:"submit",children:"Создать"})]})};export{P as default};
