import{r as n,u as d,j as a}from"./index-9b232465.js";const m=()=>{const[i,t]=n.useState(!1),o=d(),[e,l]=n.useState({email:"",password:"",repeat_password:""});async function r(){if(e.email&&e.password){let s=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email,password:e.password})});s=await s.json(),s.token?(localStorage.setItem("token",s.token),o("/lk/profile")):alert("Неверные данные")}}async function p(){e.email&&e.password&&e.repeat_password&&(await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok&&t(!1)}return a.jsx("main",{className:"login",children:a.jsxs("div",{className:"login__wrapper",children:[a.jsx("h1",{children:i?"Регистрация":"Вход"}),i?a.jsxs("div",{className:"wrapper",children:[a.jsx("label",{htmlFor:"email",className:"login__label",children:"Введите email"}),a.jsx("input",{value:e.email,onChange:s=>l({...e,email:s.target.value}),id:"email",type:"email",className:"login__input"}),a.jsx("label",{htmlFor:"password",className:"login__label",children:"Введите пароль"}),a.jsx("input",{value:e.password,onChange:s=>l({...e,password:s.target.value}),id:"password",type:"password",className:"login__input"}),a.jsx("label",{htmlFor:"repeat-password",className:"login__label",children:"Введите пароль"}),a.jsx("input",{value:e.repeat_password,onChange:s=>l({...e,repeat_password:s.target.value}),id:"repeat-password",type:"password",className:"login__input"}),a.jsx("button",{onClick:p,className:"login__button",children:"Зарегистрироваться"})]}):a.jsxs("div",{className:"wrapper",children:[a.jsx("label",{htmlFor:"email",className:"login__label",children:"Введите email"}),a.jsx("input",{value:e.email,onChange:s=>l({...e,email:s.target.value}),id:"email",type:"email",className:"login__input"}),a.jsx("label",{htmlFor:"password",className:"login__label",children:"Введите пароль"}),a.jsx("input",{value:e.password,onChange:s=>l({...e,password:s.target.value}),id:"password",type:"password",className:"login__input"}),a.jsx("button",{onClick:r,className:"login__button",children:"Войти"})]}),a.jsx("p",{children:i?"У вас уже есть аккаунт?":"У вас нет аккаунта?"}),a.jsx("button",{className:"login__switch",onClick:()=>{t(!i),l({email:"",password:"",repeatPassword:""})},children:i?"Вход":"Регистрация"})]})})};export{m as default};
